import { PrismaService } from '@/prisma/prisma.service';
import { AuditLogService } from '../audit-log/audit-log.service';
import { CreateBookingDto } from './dto/create-booking.dto';
import { UpdateBookingDto } from './dto/update-booking.dto';
import { BookingQueryDto } from './dto/booking-query.dto';
export declare class BookingService {
    private prisma;
    private audit;
    constructor(prisma: PrismaService, audit: AuditLogService);
    generateBookingCode(): string;
    checkVehicleAvailable(vehicleId: string, pickup: Date, rt: Date): Promise<boolean>;
    calcPrice(vehicleId: string, pickup: Date, rt: Date): Promise<number>;
    findAll(query: BookingQueryDto): Promise<{
        items: ({
            customer: {
                id: string;
                fullName: string;
                phone: string;
                email: string | null;
                address: string | null;
                dateOfBirth: Date | null;
                gender: string | null;
                isVerified: boolean;
                driverLicenseNo: string | null;
                driverLicenseExpiry: Date | null;
                nationalId: string | null;
                nationality: string | null;
                loyaltyPoints: number;
                membershipTier: string;
                totalSpent: number;
                avatarUrl: string | null;
                userId: string | null;
                createdAt: Date;
                updatedAt: Date;
            };
            branch: {
                id: string;
                name: string;
                code: string | null;
                slug: string | null;
                address: string | null;
                city: string | null;
                country: string | null;
                phone: string | null;
                email: string | null;
                latitude: number | null;
                longitude: number | null;
                googleMapUrl: string | null;
                businessHours: string | null;
                metaTitle: string | null;
                metaDescription: string | null;
                isActive: boolean;
                createdAt: Date;
                updatedAt: Date;
            };
            vehicle: {
                id: string;
                name: string;
                vehicleType: string | null;
                licensePlate: string;
                model: string | null;
                year: number | null;
                color: string | null;
                seatCount: number | null;
                transmission: string | null;
                fuelType: string | null;
                mileage: number | null;
                status: string;
                slug: string | null;
                metaTitle: string | null;
                metaDescription: string | null;
                seoDescription: string | null;
                rating: number | null;
                reviewCount: number | null;
                photos: string[];
                priceListId: string | null;
                overridePriceEnabled: boolean;
                overrideDailyRate: number | null;
                overrideHourlyRate: number | null;
                overrideWeekendRate: number | null;
                overrideHolidayRate: number | null;
                categoryId: string;
                branchId: string;
                brandId: string;
                createdAt: Date;
                updatedAt: Date;
            };
            returnBranch: {
                id: string;
                name: string;
                code: string | null;
                slug: string | null;
                address: string | null;
                city: string | null;
                country: string | null;
                phone: string | null;
                email: string | null;
                latitude: number | null;
                longitude: number | null;
                googleMapUrl: string | null;
                businessHours: string | null;
                metaTitle: string | null;
                metaDescription: string | null;
                isActive: boolean;
                createdAt: Date;
                updatedAt: Date;
            } | null;
        } & {
            id: string;
            bookingCode: string;
            customerId: string;
            vehicleId: string;
            branchId: string;
            returnBranchId: string | null;
            pickupDate: Date;
            returnDate: Date;
            status: string;
            baseAmount: number;
            discountAmount: number;
            totalAmount: number;
            promotionId: string | null;
            cancelReason: string | null;
            note: string | null;
            createdAt: Date;
            updatedAt: Date;
        })[];
        total: number;
        page: number;
        limit: number;
        totalPages: number;
    }>;
    findOne(id: string): Promise<{
        customer: {
            id: string;
            fullName: string;
            phone: string;
            email: string | null;
            address: string | null;
            dateOfBirth: Date | null;
            gender: string | null;
            isVerified: boolean;
            driverLicenseNo: string | null;
            driverLicenseExpiry: Date | null;
            nationalId: string | null;
            nationality: string | null;
            loyaltyPoints: number;
            membershipTier: string;
            totalSpent: number;
            avatarUrl: string | null;
            userId: string | null;
            createdAt: Date;
            updatedAt: Date;
        };
        branch: {
            id: string;
            name: string;
            code: string | null;
            slug: string | null;
            address: string | null;
            city: string | null;
            country: string | null;
            phone: string | null;
            email: string | null;
            latitude: number | null;
            longitude: number | null;
            googleMapUrl: string | null;
            businessHours: string | null;
            metaTitle: string | null;
            metaDescription: string | null;
            isActive: boolean;
            createdAt: Date;
            updatedAt: Date;
        };
        vehicle: {
            id: string;
            name: string;
            vehicleType: string | null;
            licensePlate: string;
            model: string | null;
            year: number | null;
            color: string | null;
            seatCount: number | null;
            transmission: string | null;
            fuelType: string | null;
            mileage: number | null;
            status: string;
            slug: string | null;
            metaTitle: string | null;
            metaDescription: string | null;
            seoDescription: string | null;
            rating: number | null;
            reviewCount: number | null;
            photos: string[];
            priceListId: string | null;
            overridePriceEnabled: boolean;
            overrideDailyRate: number | null;
            overrideHourlyRate: number | null;
            overrideWeekendRate: number | null;
            overrideHolidayRate: number | null;
            categoryId: string;
            branchId: string;
            brandId: string;
            createdAt: Date;
            updatedAt: Date;
        };
        contract: {
            id: string;
            bookingId: string;
            contractNo: string;
            startDate: Date | null;
            endDate: Date | null;
            totalAmount: number | null;
            depositAmount: number | null;
            terms: string | null;
            customerSignature: string | null;
            employeeSignature: string | null;
            signedBy: string | null;
            notes: string | null;
            status: string;
            fileUrl: string | null;
            createdAt: Date;
            updatedAt: Date;
        } | null;
        deposit: {
            id: string;
            bookingId: string;
            customerId: string;
            totalAmount: number;
            status: string;
            notes: string | null;
            createdAt: Date;
            updatedAt: Date;
        } | null;
        handover: {
            id: string;
            bookingId: string;
            odoStart: number | null;
            fuelLevelStart: number | null;
            pickupPlace: string | null;
            exteriorStatus: string | null;
            interiorStatus: string | null;
            damageNote: string | null;
            accessories: string | null;
            customerSignature: string | null;
            handedOverBy: string | null;
            photoUrls: string[];
            createdAt: Date;
            updatedAt: Date;
        } | null;
        returnReport: {
            id: string;
            bookingId: string;
            odoEnd: number | null;
            fuelLevelEnd: number | null;
            damageNote: string | null;
            extraCharge: number | null;
            condition: string | null;
            checklist: string | null;
            returnBranchId: string | null;
            note: string | null;
            photoUrls: string[];
            createdAt: Date;
            updatedAt: Date;
        } | null;
        invoice: {
            id: string;
            invoiceNo: string;
            bookingId: string;
            customerId: string;
            issueDate: Date;
            subtotal: number;
            surchargeTotal: number;
            discountTotal: number;
            vatPercent: number;
            vatAmount: number;
            totalAmount: number;
            status: string;
            notes: string | null;
            createdAt: Date;
            updatedAt: Date;
        } | null;
        returnBranch: {
            id: string;
            name: string;
            code: string | null;
            slug: string | null;
            address: string | null;
            city: string | null;
            country: string | null;
            phone: string | null;
            email: string | null;
            latitude: number | null;
            longitude: number | null;
            googleMapUrl: string | null;
            businessHours: string | null;
            metaTitle: string | null;
            metaDescription: string | null;
            isActive: boolean;
            createdAt: Date;
            updatedAt: Date;
        } | null;
    } & {
        id: string;
        bookingCode: string;
        customerId: string;
        vehicleId: string;
        branchId: string;
        returnBranchId: string | null;
        pickupDate: Date;
        returnDate: Date;
        status: string;
        baseAmount: number;
        discountAmount: number;
        totalAmount: number;
        promotionId: string | null;
        cancelReason: string | null;
        note: string | null;
        createdAt: Date;
        updatedAt: Date;
    }>;
    create(dto: CreateBookingDto, actorId?: string): Promise<{
        id: string;
        bookingCode: string;
        customerId: string;
        vehicleId: string;
        branchId: string;
        returnBranchId: string | null;
        pickupDate: Date;
        returnDate: Date;
        status: string;
        baseAmount: number;
        discountAmount: number;
        totalAmount: number;
        promotionId: string | null;
        cancelReason: string | null;
        note: string | null;
        createdAt: Date;
        updatedAt: Date;
    }>;
    update(id: string, dto: UpdateBookingDto, actorId?: string): Promise<{
        id: string;
        bookingCode: string;
        customerId: string;
        vehicleId: string;
        branchId: string;
        returnBranchId: string | null;
        pickupDate: Date;
        returnDate: Date;
        status: string;
        baseAmount: number;
        discountAmount: number;
        totalAmount: number;
        promotionId: string | null;
        cancelReason: string | null;
        note: string | null;
        createdAt: Date;
        updatedAt: Date;
    }>;
    changeStatus(id: string, status: string, actorId?: string): Promise<{
        id: string;
        bookingCode: string;
        customerId: string;
        vehicleId: string;
        branchId: string;
        returnBranchId: string | null;
        pickupDate: Date;
        returnDate: Date;
        status: string;
        baseAmount: number;
        discountAmount: number;
        totalAmount: number;
        promotionId: string | null;
        cancelReason: string | null;
        note: string | null;
        createdAt: Date;
        updatedAt: Date;
    }>;
    cancel(id: string, reason: string, actorId?: string): Promise<{
        id: string;
        bookingCode: string;
        customerId: string;
        vehicleId: string;
        branchId: string;
        returnBranchId: string | null;
        pickupDate: Date;
        returnDate: Date;
        status: string;
        baseAmount: number;
        discountAmount: number;
        totalAmount: number;
        promotionId: string | null;
        cancelReason: string | null;
        note: string | null;
        createdAt: Date;
        updatedAt: Date;
    }>;
    delete(id: string, actorId?: string): Promise<{
        id: string;
        bookingCode: string;
        customerId: string;
        vehicleId: string;
        branchId: string;
        returnBranchId: string | null;
        pickupDate: Date;
        returnDate: Date;
        status: string;
        baseAmount: number;
        discountAmount: number;
        totalAmount: number;
        promotionId: string | null;
        cancelReason: string | null;
        note: string | null;
        createdAt: Date;
        updatedAt: Date;
    }>;
}
